{
  "$schema": "http://json-schema.org/draft-04/schema#",
  "id": "prosecution-conclusion",
  "type": "object",
  "additionalProperties": false,
  "definitions": {
    "new_resource": {
      "description": "object representing a single prosecution conclusion",
      "type": "object",
      "properties": {
        "prosecutionConcluded": {
          "type": "object",
          "properties": {
            "prosecutionCaseId": {
              "id": {
                "$ref": "prosecution_case.json#/definitions/id"
              }
            },
            "defendantId": {
              "id": {
                "$ref": "defendant.json#/definitions/id"
              }
            },
            "isConcluded": {
              "description": "Is true if this defendant has no pending unresolved offence",
              "type": "boolean"
            },
            "hearingIdWhereChangeOccurred": {
              "id": {
                "$ref": "hearing.json#/definitions/id"
              }
            },
            "offenceSummary": {
              "description": "A list of all the offences of the current defendant",
              "type": "array",
              "minItems": 1,
              "items": {
                "$ref": "#/definitions/offenceSummary"
              }
            }
          },
          "required": [
            "prosecutionCaseId",
            "defendantId",
            "isConcluded",
            "hearingIdWhereChangeOccurred",
            "offenceSummary"
          ],
          "additionalProperties": false
        }
      }
    },
    "offenceSummary": {
      "type": "object",
      "properties": {
        "offenceId": {
          "id": {
            "$ref": "offence.json#/definitions/id"
          }
        },
        "offenceCode": {
          "description": "The CJS code of the offence",
          "type": "string"
        },
        "proceedingsConcluded": {
          "description": "Indicate whether this offence has been concluded or not",
          "type": "boolean"
        },
        "proceedingsConcludedChangedDate": {
          "description": "The latest result order date for the offence",
          "datePattern": {
            "type": "string",
            "pattern": "^((([\\+-]?\\d{4}(?!\\d{2}\\b))\\-(0[13578]|1[02])\\-(0[1-9]|[12]\\d|3[01]))|(([\\+-]?\\d{4}(?!\\d{2}\\b))\\-(0[13456789]|1[012])\\-(0[1-9]|[12]\\d|30))|(([\\+-]?\\d{4}(?!\\d{2}\\b))\\-02\\-(0[1-9]|1\\d|2[0-8]))|(((1[6-9]|[2-9]\\d)(0[48]|[2468][048]|[13579][26])|((16|[2468][048]|[3579][26])00))\\-02\\-29))$"
          }
        },
        "plea": {
          "description": "The plea of the current offence",
          "$ref": "#/definitions/plea"
        },
        "verdict": {
          "description": "The verdict of the current offence",
          "$ref": "#/definitions/verdict"
        }
      },
      "required": [
        "offenceId",
        "offenceCode",
        "proceedingsConcluded",
        "proceedingsConcludedChangedDate"
      ],
      "additionalProperties": false
    },
    "plea": {
      "type": "object",
      "properties": {
        "originatingHearingId": {
          "id": {
            "$ref": "hearing.json#/definitions/id"
          }
        },
        "value": {
          "description": "The value of this plea i.e. GUILTY, etc",
          "type": "string"
        },
        "pleaDate": {
          "description": "The date that the plea was taken and accepted by the court",
          "type": "string",
          "format": "date"
        }
      },
      "required": [
        "originatingHearingId",
        "value",
        "pleaDate"
      ],
      "additionalProperties": false
    },
    "verdict": {
      "type": "object",
      "properties": {
        "originatingHearingId": {
          "id": {
            "$ref": "hearing.json#/definitions/id"
          }
        },
        "verdictDate": {
          "description": "The date the verdict was reached by the court",
          "type": "string",
          "format": "date"
        },
        "verdictType": {
          "description": "A categorisation of the verdict i.e ",
          "$ref": "#/definitions/verdictType"
        }
      },
      "required": [
        "originatingHearingId",
        "verdictDate",
        "verdictType"
      ],
      "additionalProperties": false
    },
    "verdictType": {
      "type": "object",
      "properties": {
        "verdictTypeId": {
          "description": "The identifier of the verdict type",
          "format": "uuid",
          "type": "string"
        },
        "description": {
          "description": "The description of the verdict type",
          "type": "string"
        },
        "category": {
          "description": "The category of this verdict type i.e Guilty but of lesser offence...",
          "type": "string"
        },
        "categoryType": {
          "description": "The category type of this verdict type i.e. GUILTY. This is used to determine whether the defendant is convicted or not based on the verdict",
          "type": "string"
        },
        "sequence": {
          "description": "The display sequence of this verdict to the court clerk i.e 1, 2, ..",
          "type": "integer"
        }
      },
      "required": [
        "verdictTypeId",
        "description",
        "category",
        "categoryType",
        "sequence"
      ],
      "additionalProperties": false
    }
  }
}
